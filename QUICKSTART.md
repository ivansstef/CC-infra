# üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç Cinema Club Infrastructure

## üéØ –î–≤–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥–µ–ø–ª–æ—é

### ‚≠ê –í–∞—Ä—ñ–∞–Ω—Ç –ê: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —á–µ—Ä–µ–∑ GitHub Actions (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- ‚úÖ –ü–æ–≤–Ω—ñ—Å—Ç—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- ‚úÖ –ë–µ–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤
- ‚úÖ –ë–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è credentials
- ‚úÖ –õ–æ–≥–∏ —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—è –¥–µ–ø–ª–æ—ó–≤

**–ù–µ–¥–æ–ª—ñ–∫–∏:**
- –ü–æ—Ç—Ä–µ–±—É—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è GitHub Secrets

### üîß –í–∞—Ä—ñ–∞–Ω—Ç –ë: –†—É—á–Ω–∏–π —á–µ—Ä–µ–∑ Ansible (–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- ‚úÖ –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

**–ù–µ–¥–æ–ª—ñ–∫–∏:**
- –ü–æ—Ç—Ä–µ–±—É—î –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Ansible
- –ü–æ—Ç—Ä–µ–±—É—î –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ SSH –¥–æ—Å—Ç—É–ø—É

---

## ‚≠ê –í–∞—Ä—ñ–∞–Ω—Ç –ê: GitHub Actions (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

### –ö—Ä–æ–∫ 1: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è GitHub Secrets

–ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ Settings —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é ‚Üí Secrets and variables ‚Üí Actions

–î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ secrets:

```
SSH_PRIVATE_KEY    ‚Üí –í–∞—à –ø—Ä–∏–≤–∞—Ç–Ω–∏–π SSH –∫–ª—é—á
SERVER_IP          ‚Üí IP –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: 203.0.113.1)
SSH_USER           ‚Üí SSH –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: ubuntu)
DOCKER_USERNAME    ‚Üí Docker Hub username
DOCKER_PASSWORD    ‚Üí Docker Hub access token
```

üìñ **–î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è:** [GITHUB_SECRETS_SETUP.md](GITHUB_SECRETS_SETUP.md)

### –ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—é

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫:
```bash
# –ü—Ä–æ—Å—Ç–æ –∑—Ä–æ–±—ñ—Ç—å –±—É–¥—å-—è–∫—É –∑–º—ñ–Ω—É –≤ ansible/ —ñ push:
git add .
git commit -m "Update infrastructure"
git push origin main
```

#### –†—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫:
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **Actions** tab
2. –û–±–µ—Ä—ñ—Ç—å **Deploy Infrastructure**
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Run workflow**
4. –î–æ—á–µ–∫–∞–π—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è (~5-10 —Ö–≤–∏–ª–∏–Ω)

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
```
http://YOUR_SERVER_IP:8080
```

### –ö—Ä–æ–∫ 4: –î–µ–ø–ª–æ–π –¥–æ–¥–∞—Ç–∫—É (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

1. Actions ‚Üí **Deploy Application** ‚Üí Run workflow
2. –î–æ—á–µ–∫–∞–π—Ç–µ—Å—å –∑–±—ñ—Ä–∫–∏ Docker image
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

---

## üîß –í–∞—Ä—ñ–∞–Ω—Ç –ë: –†—É—á–Ω–∏–π Ansible –¥–µ–ø–ª–æ–π

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `ansible/inventory.ini`:

```ini
[cinema]
your-server-ip ansible_user=ubuntu ansible_ssh_private_key_file=~/.ssh/id_rsa
```

–ó–∞–º—ñ–Ω—ñ—Ç—å:
- `your-server-ip` –Ω–∞ IP –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- `ubuntu` –Ω–∞ –≤–∞—à–µ —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `~/.ssh/id_rsa` –Ω–∞ —à–ª—è—Ö –¥–æ –≤–∞—à–æ–≥–æ SSH –∫–ª—é—á–∞

### 2Ô∏è‚É£ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

```bash
cd ansible
ansible -i inventory.ini cinema -m ping
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
your-server-ip | SUCCESS => {
    "ping": "pong"
}
```

### 3Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

```bash
ansible-playbook -i inventory.ini deploy.yml
```

### 4Ô∏è‚É£ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä —ñ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞:
```
http://your-server-ip:8080
```

## –©–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è?

‚úÖ –°–∏—Å—Ç–µ–º–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è Ubuntu  
‚úÖ Git  
‚úÖ Python 3 —ñ pip  
‚úÖ Docker —ñ Docker Compose  
‚úÖ Cinema Club –¥–æ–¥–∞—Ç–æ–∫  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker  

## –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:

```bash
ssh ubuntu@your-server-ip
cd /opt/cinema-club
docker-compose ps
docker-compose logs
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫:

```bash
ansible-playbook -i inventory.ini deploy.yml --tags deploy
```

### –û–Ω–æ–≤–∏—Ç–∏ –ª–∏—à–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:

```bash
ansible-playbook -i inventory.ini deploy.yml --tags config
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–º—ñ–Ω–Ω–∏—Ö

–û—Å–Ω–æ–≤–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –≤ `ansible/deploy.yml`:

- `app_name`: cinema-club
- `app_port`: 8080
- `repo_url`: https://github.com/ivansstef/CinemaClub.git
- `app_dir`: /opt/cinema-club

## Troubleshooting

### –ü–æ–º–∏–ª–∫–∞ SSH –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
ping your-server-ip

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ SSH –¥–æ—Å—Ç—É–ø
ssh -i ~/.ssh/id_rsa ubuntu@your-server-ip
```

### –ü–æ–º–∏–ª–∫–∞ –∑ Docker

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å Docker
sudo systemctl status docker

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Docker
sudo systemctl restart docker
```

### –ü–æ—Ä—Ç –∑–∞–π–Ω—è—Ç–∏–π

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–æ—Ä—Ç 8080
sudo lsof -i :8080

# –ó—É–ø–∏–Ω—ñ—Ç—å –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É—é—á–∏–π –ø—Ä–æ—Ü–µ—Å
docker-compose down
```

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ GitHub Secrets –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó:
   - `SSH_PRIVATE_KEY`
   - `SERVER_IP`
   - `SSH_USER`

2. –ê–∫—Ç–∏–≤—É–π—Ç–µ CI/CD pipelines –≤ `.github/workflows/`

3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è

---

**–ü–∏—Ç–∞–Ω–Ω—è?** –í—ñ–¥–∫—Ä–∏–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó.
