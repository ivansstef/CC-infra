# üìã Cinema Club Infrastructure - –ü—ñ–¥—Å—É–º–æ–∫

## ‚úÖ –©–æ –±—É–ª–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ

### üèóÔ∏è –ü–æ–≤–Ω–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ CI/CD –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º GitHub Actions

–ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä **–Ω–µ –ø–æ—Ç—Ä–µ–±—É—î** –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä—ñ–≤ –≤ –∫–æ–¥—ñ!  
–í—Å—ñ —á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –±–µ–∑–ø–µ—á–Ω–æ –≤ **GitHub Secrets**.

## üéØ –ì–æ–ª–æ–≤–Ω–∞ –≤—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å –≤—ñ–¥ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É

### ‚ùå –°—Ç–∞—Ä–∏–π —Å–ø–æ—Å—ñ–± (–Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–π):
```ini
# ansible/inventory.ini
[cinema]
203.0.113.1 ansible_user=ubuntu ansible_ssh_private_key_file=~/.ssh/id_rsa
```
- IP –∞–¥—Ä–µ—Å–∏ –≤ –∫–æ–¥—ñ
- –õ–æ–∫–∞–ª—å–Ω—ñ SSH –∫–ª—é—á—ñ
- –†—É—á–Ω–∏–π –¥–µ–ø–ª–æ–π
- –ù–µ–º–∞—î —ñ—Å—Ç–æ—Ä—ñ—ó

### ‚úÖ –ù–æ–≤–∏–π —Å–ø–æ—Å—ñ–± (—á–µ—Ä–µ–∑ GitHub Actions):
```yaml
# .github/workflows/deploy_infra.yml
${{ secrets.SERVER_IP }}    # –ë–µ–∑–ø–µ—á–Ω–æ –≤ GitHub
${{ secrets.SSH_USER }}     # –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ
${{ secrets.SSH_PRIVATE_KEY }}  # –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ –∫–æ–¥—ñ
```
- –ë–µ–∑ —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö –≤ –∫–æ–¥—ñ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –¥–µ–ø–ª–æ–π
- –Ü—Å—Ç–æ—Ä—ñ—è –≤ Actions
- –õ–µ–≥–∫–∏–π rollback

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
CC-infra/
‚îú‚îÄ‚îÄ .github/workflows/
‚îÇ   ‚îú‚îÄ‚îÄ gitleaks.yml ‚úÖ           # –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ deploy_infra.yml ‚úÖ       # –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
‚îÇ   ‚îî‚îÄ‚îÄ deploy_app.yml ‚úÖ         # –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π –¥–æ–¥–∞—Ç–∫—É
‚îÇ
‚îú‚îÄ‚îÄ ansible/
‚îÇ   ‚îú‚îÄ‚îÄ roles/cinema/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/main.yml        # –ü–æ–≤–Ω–∏–π Ansible playbook
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ docker-compose.yml.j2
‚îÇ   ‚îú‚îÄ‚îÄ deploy.yml                # –ì–æ–ª–æ–≤–Ω–∏–π playbook
‚îÇ   ‚îî‚îÄ‚îÄ inventory.ini             # –¢—ñ–ª—å–∫–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
‚îÇ
‚îú‚îÄ‚îÄ GITHUB_SECRETS_SETUP.md ‚úÖ    # –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ DEPLOYMENT_FLOW.md ‚úÖ         # –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ –ø—Ä–æ—Ü–µ—Å–∏
‚îú‚îÄ‚îÄ QUICKSTART.md ‚úÖ              # –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ CHECKLIST.md ‚úÖ               # –ü–µ—Ä–µ–ª—ñ–∫ –∑–∞–¥–∞—á
‚îî‚îÄ‚îÄ README.md ‚úÖ                  # –ì–æ–ª–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## üöÄ –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

### 1. –†–æ–∑—Ä–æ–±–Ω–∏–∫ —Ä–æ–±–∏—Ç—å –∑–º—ñ–Ω–∏
```bash
git add .
git commit -m "Update infrastructure"
git push origin main
```

### 2. GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
1. ‚ö° –ó–∞–ø—É—Å–∫–∞—î Gitleaks (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–µ–∑–ø–µ–∫–∏)
2. üîß –í—Å—Ç–∞–Ω–æ–≤–ª—é—î Ansible –Ω–∞ runner
3. üîê –û—Ç—Ä–∏–º—É—î credentials –∑ GitHub Secrets
4. üì° –ü—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
5. üöÄ –î–µ–ø–ª–æ—ó—Ç—å –≤—Å—é —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
6. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—è—î —É—Å–ø—ñ—à–Ω—ñ—Å—Ç—å

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç:
- Cinema Club –ø—Ä–∞—Ü—é—î –Ω–∞ `http://YOUR_SERVER:8080`
- –í—Å—ñ –ª–æ–≥–∏ –≤ GitHub Actions
- –Ü—Å—Ç–æ—Ä—ñ—è –¥–µ–ø–ª–æ—ó–≤ –∑–±–µ—Ä–µ–∂–µ–Ω–∞
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å rollback

## üîê –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ GitHub Secrets

| Secret | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|-------------|
| `SERVER_IP` | IP –∞–¥—Ä–µ—Å–∞ –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ |
| `SSH_USER` | SSH –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (ubuntu) |
| `SSH_PRIVATE_KEY` | –ü—Ä–∏–≤–∞—Ç–Ω–∏–π SSH –∫–ª—é—á |
| `DOCKER_USERNAME` | Docker Hub username |
| `DOCKER_PASSWORD` | Docker Hub token |

üìñ –î–µ—Ç–∞–ª—å–Ω–æ: [GITHUB_SECRETS_SETUP.md](GITHUB_SECRETS_SETUP.md)

## ‚ö° Workflows

### 1Ô∏è‚É£ Gitleaks (Security) - ‚úÖ –ê–∫—Ç–∏–≤–Ω–∏–π
- **–¢—Ä–∏–≥–µ—Ä:** –∫–æ–∂–µ–Ω push, PR, —â–æ–¥–µ–Ω–Ω–æ
- **–©–æ —Ä–æ–±–∏—Ç—å:** –°–∫–∞–Ω—É—î –∫–æ–¥ –Ω–∞ —Å–µ–∫—Ä–µ—Ç–∏
- **–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** ~30 —Å–µ–∫—É–Ω–¥

### 2Ô∏è‚É£ Deploy Infrastructure - ‚úÖ –ê–∫—Ç–∏–≤–Ω–∏–π
- **–¢—Ä–∏–≥–µ—Ä:** push –≤ main (–∑–º—ñ–Ω–∏ –≤ ansible/), —Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫
- **–©–æ —Ä–æ–±–∏—Ç—å:** –ü–æ–≤–Ω–∏–π –¥–µ–ø–ª–æ–π —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —á–µ—Ä–µ–∑ Ansible
- **–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** ~5-10 —Ö–≤–∏–ª–∏–Ω

### 3Ô∏è‚É£ Deploy Application - ‚úÖ –ê–∫—Ç–∏–≤–Ω–∏–π
- **–¢—Ä–∏–≥–µ—Ä:** —Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫
- **–©–æ —Ä–æ–±–∏—Ç—å:** –ó–±—ñ—Ä–∫–∞ Docker + –¥–µ–ø–ª–æ–π Cinema Club
- **–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:** ~3-5 —Ö–≤–∏–ª–∏–Ω

## üéØ –ü–µ—Ä–µ–≤–∞–≥–∏ –ø—ñ–¥—Ö–æ–¥—É

### –ë–µ–∑–ø–µ–∫–∞ üîê
- –ù–µ–º–∞—î credentials –≤ –∫–æ–¥—ñ
- –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ñ secrets –≤ GitHub
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è –Ω–∞ –≤–∏—Ç—ñ–∫ –¥–∞–Ω–∏—Ö

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è ‚ö°
- Push –≤ main = –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π
- –ù–µ–º–∞—î —Ä—É—á–Ω–∏—Ö –∫–æ–º–∞–Ω–¥
- –ü–æ–≤—Ç–æ—Ä—é–≤–∞–Ω—ñ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—É

### –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å üìä
- –í—Å—ñ –ª–æ–≥–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ
- –Ü—Å—Ç–æ—Ä—ñ—è –¥–µ–ø–ª–æ—ó–≤
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å rollback

### –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å üìà
- –õ–µ–≥–∫–æ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ —Å–µ—Ä–≤–µ—Ä–∏
- –†—ñ–∑–Ω—ñ environments (staging/prod)
- –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –¥–µ–ø–ª–æ—ó

## üìã –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –î–ª—è –ø–æ—á–∞—Ç–∫—É —Ä–æ–±–æ—Ç–∏:

1. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ Secrets** (5 —Ö–≤–∏–ª–∏–Ω):
   ```
   GitHub ‚Üí Settings ‚Üí Secrets ‚Üí Add secrets
   ```

2. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–µ–ø–ª–æ–π** (1 –∫–ª—ñ–∫):
   ```
   Actions ‚Üí Deploy Infrastructure ‚Üí Run workflow
   ```

3. **–ì–æ—Ç–æ–≤–æ!** (10 —Ö–≤–∏–ª–∏–Ω):
   ```
   http://YOUR_SERVER:8080
   ```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

| –§–∞–π–ª | –û–ø–∏—Å |
|------|------|
| [README.md](README.md) | –ó–∞–≥–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥ –ø—Ä–æ–µ–∫—Ç—É |
| [QUICKSTART.md](QUICKSTART.md) | –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç (2 –≤–∞—Ä—ñ–∞–Ω—Ç–∏) |
| [GITHUB_SECRETS_SETUP.md](GITHUB_SECRETS_SETUP.md) | –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è secrets |
| [DEPLOYMENT_FLOW.md](DEPLOYMENT_FLOW.md) | –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ –ø—Ä–æ—Ü–µ—Å–∏ |
| [CHECKLIST.md](CHECKLIST.md) | –©–æ –≤–∏–∫–æ–Ω–∞–Ω–æ |

## üéâ –í–∏—Å–Ω–æ–≤–æ–∫

**–í–∞—à–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ production use!**

- ‚úÖ –ü–æ–≤–Ω—ñ—Å—Ç—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –ë–µ–∑–ø–µ—á–Ω–∞ (–±–µ–∑ —Å–µ–∫—Ä–µ—Ç—ñ–≤ –≤ –∫–æ–¥—ñ)
- ‚úÖ –ü—Ä–æ–∑–æ—Ä–∞ (–ª–æ–≥–∏ —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—è)
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–∞ (–ª–µ–≥–∫–æ –¥–æ–¥–∞—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∏)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–∞ (5 readme —Ñ–∞–π–ª—ñ–≤)

**–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫:** –î–æ–¥–∞–π—Ç–µ –≤–∞—à—ñ GitHub Secrets —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –ø–µ—Ä—à–∏–π –¥–µ–ø–ª–æ–π! üöÄ

---

**–ü–∏—Ç–∞–Ω–Ω—è?** –î–∏–≤—ñ—Ç—å—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –≤–∏—â–µ –∞–±–æ –≤—ñ–¥–∫—Ä–∏–π—Ç–µ issue.
